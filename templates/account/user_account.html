{% extends "base.html" %}

{% block content %}
<section class="artwork-summary mt-4">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h1 class="animate-from-left">Your Account.</h1>
            </div>
        </div>
    </div>
</section>

<div class="container mt-4">
    <div class="row">
        <div class="col-md-6">
            <p><strong>You are logged in as:</strong> {{ user.username }}</p>
            <p><strong>Your Email:</strong> {{ user.email }}</p>
        </div>
    </div>
</div>

<div class="container mt-4">
    <div class="row">
        <div class="col-md-12">
            <h2>Saved Artwork</h2>
            <div class="row artwork-collection">
                {% for artwork in user.saved_artworks.all %}
                    <div class="col-md-3 mb-3">
                        <div class="art-card">
                            <a href="{{ artwork.get_absolute_url }}" class="art-thumbnail" data-toggle="modal" data-target="#artworkModal"
                                data-artist="{{ artwork.artist }}"
                                data-title="{{ artwork.title }}"
                                data-medium="{{ artwork.medium }}"
                                data-description="{{ artwork.description }}"
                                data-image="{{ artwork.image.url }}"
                                data-size="{{ artwork.size }}"
                                data-year_created="{{ artwork.year_created }}"
                                data-sold="{{ artwork.sold }}"
                                data-artwork-detail="{{ artwork.get_absolute_url }}"
                                onclick="showArtworkModal(this)">
                                <img src="{{ artwork.image.url }}" class="card-img-top" alt="{{ artwork.title }}">
                                <!-- Add overlay with title -->
                                <div class="overlay">
                                    <p>{{ artwork.title }}</p>
                                </div>
                            </a>
                            <button class="btn btn-danger remove-artwork" data-artwork-id="{{ artwork.id }}">Remove</button>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $(".remove-artwork").click(function () {
            var artworkId = $(this).data("artwork-id");
            var url = "/remove-artwork/" + artworkId + "/";

            var button = $(this);

            $.get(url, function (data) {
                if (data.saved === false) {
                    button.parent().remove();
                }
            });
        });
    });
</script>

{% endblock %}

