{% extends "base.html" %}

{% block content %}
<section class="artwork-summary mt-4">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h1 class="animate-from-left">Your Account.</h1>
            </div>
        </div>
    </div>
</section>

<div class="container mt-4">
    <div class="row">
        <div class="col-md-6">
            <p><strong>Name:</strong> {{ user.name }}</p>
            <p><strong>Email:</strong> {{ user.email }}</p>
        </div>
    </div>
</div>

<div class="container mt-4">
    <div class="row">
        <div class="col-md-12">
            <h2>Saved Artwork</h2>
            <div class="row artwork-collection">
                {% for artwork in user.saved_artworks.all %}
                    <div class="col-md-3">
                        <div class="artwork-entry">
                            <a href="{{ artwork.get_absolute_url }}">
                                <img src="{{ artwork.image.url }}" alt="{{ artwork.title }}" class="img-thumbnail">
                                <p class="collection-title">{{ artwork.title }}</p>
                            </a>
                            <button class="btn btn-danger remove-artwork" data-artwork-id="{{ artwork.id }}">Remove</button>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $(".remove-artwork").click(function () {
            var artworkId = $(this).data("artwork-id");
            var url = "/remove-artwork/" + artworkId + "/";

            var button = $(this);

            $.get(url, function (data) {
                if (data.saved === false) {
                    button.parent().remove();
                }
            });
        });
    });
</script>
{% endblock %}
